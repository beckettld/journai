import"../chunks/CWj6FrbW.js";import{i as da}from"../chunks/J7WZqsoh.js";import{A as ca,B as ua,C as ga,E as ha,F as c,G as l,H as pa,s,I as h,a,J as r,K as n,M as d,O as M,Q as G,R,T as fa,U as O}from"../chunks/DVoE9nWq.js";import{i as b,s as ma,a as _a}from"../chunks/CvlPnrEX.js";import{s as V}from"../chunks/BRKRlfvo.js";import{a as ya,g as Y}from"../chunks/CwUqDDKe.js";import{a as ba,G as ka,s as wa,b as Sa}from"../chunks/CzBqQjMQ.js";import{g as Wa,a as xa}from"../chunks/_4MF4a4D.js";var Aa=c('<div class="error-message svelte-1uha8ag"> </div>'),Ca=c(`<div class="landing svelte-1uha8ag"><div class="landing-content svelte-1uha8ag"><h1 class="landing-title svelte-1uha8ag">AI Mentor</h1> <p class="landing-subtitle svelte-1uha8ag">Journal daily. Reflect deeply on weekends.</p> <div class="landing-description svelte-1uha8ag"><p class="svelte-1uha8ag"><strong>Daily Vent Sessions (Mon–Fri):</strong> Spend 30 minutes reflecting with an
            empathetic listener. Share your thoughts, feelings, and experiences without judgment.</p> <p class="svelte-1uha8ag"><strong>Weekly Mentor Sessions (Sat–Sun):</strong> Spend an hour in synthesis. I'll review
            your week, identify patterns, and share insights and next steps.</p></div> <!> <button class="signin-button svelte-1uha8ag"> </button></div></div>`),Ia=c('<div class="checking-status svelte-1uha8ag">Checking progress...</div>'),Ma=c('<p class="locked-message svelte-1uha8ag">Admin access enabled. You can start a mentor session anytime.</p>'),Ga=c('<p class="locked-message svelte-1uha8ag">Complete 5 daily vent sessions to unlock your weekly mentor session.</p> <p class="progress-message svelte-1uha8ag"> </p>',1),Ua=c('<div class="mentor-locked svelte-1uha8ag"><!></div>'),Da=c('<div class="admin-badge svelte-1uha8ag"><p class="admin-message svelte-1uha8ag">Admin: Unlimited access</p></div>'),Ea=c('<div class="dashboard svelte-1uha8ag"><div class="dashboard-header svelte-1uha8ag"><h2 class="svelte-1uha8ag">Welcome back!</h2> <p class="svelte-1uha8ag">What would you like to do today?</p></div> <div class="session-grid svelte-1uha8ag"><div class="session-card journal-card svelte-1uha8ag"><div class="card-header svelte-1uha8ag"><h3 class="svelte-1uha8ag">Daily Journal Entry</h3> <span class="badge svelte-1uha8ag">30 min</span></div> <p class="card-description svelte-1uha8ag">Write about your day here...</p> <button class="session-button svelte-1uha8ag">Start Daily Journaling</button></div> <div><div class="card-header svelte-1uha8ag"><h3 class="svelte-1uha8ag">Weekly Mentor Session</h3> <span class="badge svelte-1uha8ag">60 min</span></div> <p class="card-description svelte-1uha8ag">Review your week. Explore patterns. Get actionable insights and next steps.</p> <!> <!> <button> </button></div></div></div>'),Ja=c('<div class="landing-container svelte-1uha8ag"><!></div>');function Va(B,H){ca(H,!1);const p=()=>_a(ba,"$authUser",K),[K,Q]=ma();let W=h(!1),x=h(null),f=h(!1),U=h(0),v=h(!1),k=h(!1),A=h(!1);function T(){const e=new Date,i=Wa(e);return`${xa(e)}-W${String(i).padStart(2,"0")}`}async function D(){if(p()){s(k,!0);try{const e=T(),i=new URLSearchParams({uid:p().uid,weekId:e}),t=await(await fetch(`/api/mentor/availability?${i.toString()}`)).json();if(t.error)throw new Error(t.error);s(v,t.available),s(U,t.ventCount),s(A,t.isAdmin)}catch(e){console.error("Failed to check mentor availability:",e),s(v,!1),s(U,0),s(A,!1)}finally{s(k,!1)}}}ua(async()=>{p()&&(s(f,!0),await D())}),ya(async()=>{p()&&a(f)&&await D()});async function q(){s(W,!0),s(x,null);try{const e=new ka;await wa(Sa,e),s(f,!0)}catch(e){s(x,e.message||"Failed to sign in")}finally{s(W,!1)}}function z(){Y("/session/journal")}function X(){a(v)&&Y("/session/weekly")}ga(()=>(p(),a(f)),()=>{p()&&a(f)&&D()}),ha(),da();var E=Ja(),Z=r(E);{var aa=e=>{var i=Ca(),g=r(i),t=d(r(g),6);{var J=m=>{var w=Aa(),j=r(w,!0);n(w),M(()=>G(j,a(x))),l(m,w)};b(t,m=>{a(x)&&m(J)})}var u=d(t,2),C=r(u,!0);n(u),n(g),n(i),M(()=>{u.disabled=a(W),G(C,a(W)?"Signing in...":"Sign in with Google")}),R("click",u,q),l(e,i)},ea=e=>{var i=Ea(),g=d(r(i),2),t=r(g),J=d(r(t),4);n(t);var u=d(t,2);let C;var m=d(r(u),4);{var w=o=>{var _=Ia();l(o,_)},j=o=>{var _=fa(),ra=O(_);{var na=F=>{var P=Ua(),ia=r(P);{var oa=y=>{var I=Ma();l(y,I)},la=y=>{var I=Ga(),N=d(O(I),2),va=r(N);n(N),M(()=>G(va,`Progress: ${a(U)??""} / 5 sessions`)),l(y,I)};b(ia,y=>{a(A)?y(oa):y(la,!1)})}n(P),l(F,P)};b(ra,F=>{a(v)||F(na)},!0)}l(o,_)};b(m,o=>{a(k)?o(w):o(j,!1)})}var $=d(m,2);{var sa=o=>{var _=Da();l(o,_)};b($,o=>{a(A)&&a(v)&&o(sa)})}var S=d($,2);let L;var ta=r(S,!0);n(S),n(u),n(g),n(i),M(()=>{C=V(u,1,"session-card mentor-card svelte-1uha8ag",null,C,{disabled:!a(v)}),L=V(S,1,"session-button svelte-1uha8ag",null,L,{disabled:!a(v)}),S.disabled=!a(v)||a(k),G(ta,a(k)?"Checking...":a(v)?"Start Mentor Session":"Locked")}),R("click",J,z),R("click",S,X),l(e,i)};b(Z,e=>{a(f)?e(ea,!1):e(aa)})}n(E),l(B,E),pa(),Q()}export{Va as component};

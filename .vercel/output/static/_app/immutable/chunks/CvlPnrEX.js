var R=Object.defineProperty;var T=s=>{throw TypeError(s)};var x=(s,e,t)=>e in s?R(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var A=(s,e,t)=>x(s,typeof e!="symbol"?e+"":e,t),E=(s,e,t)=>e.has(s)||T("Cannot "+t);var r=(s,e,t)=>(E(s,e,"read from private field"),t?t.call(s):e.get(s)),d=(s,e,t)=>e.has(s)?T("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),w=(s,e,t,a)=>(E(s,e,"write to private field"),a?a.call(s,t):e.set(s,t),t);import{v as M,a3 as I,a4 as g,a5 as B,a6 as N,a7 as S,h as y,a8 as C,a9 as O,aa as U,ab as j,ac as H,ad as L,ae as P,af as Y,ag as $,ah as q,ai as D,aj as z,ak as F,I as G,al as J,am as K,a as Q,s as V,an as W}from"./DVoE9nWq.js";var h,l,o,b,p,m;class X{constructor(e,t=!0){A(this,"anchor");d(this,h,new Map);d(this,l,new Map);d(this,o,new Map);d(this,b,!0);d(this,p,()=>{var e=M;if(r(this,h).has(e)){var t=r(this,h).get(e),a=r(this,l).get(t);if(a)I(a);else{var f=r(this,o).get(t);f&&(r(this,l).set(t,f.effect),r(this,o).delete(t),f.fragment.lastChild.remove(),this.anchor.before(f.fragment),a=f.effect)}for(const[n,i]of r(this,h)){if(r(this,h).delete(n),n===e)break;const c=r(this,o).get(i);c&&(g(c.effect),r(this,o).delete(i))}for(const[n,i]of r(this,l)){if(n===t)continue;const c=()=>{if(Array.from(r(this,h).values()).includes(n)){var _=document.createDocumentFragment();O(i,_),_.append(N()),r(this,o).set(n,{effect:i,fragment:_})}else g(i);r(this,l).delete(n)};r(this,b)||!a?B(i,c,!1):c()}}});d(this,m,e=>{r(this,h).delete(e);const t=Array.from(r(this,h).values());for(const[a,f]of r(this,o))t.includes(a)||(g(f.effect),r(this,o).delete(a))});this.anchor=e,w(this,b,t)}ensure(e,t){var a=M,f=U();if(t&&!r(this,l).has(e)&&!r(this,o).has(e))if(f){var n=document.createDocumentFragment(),i=N();n.append(i),r(this,o).set(e,{effect:S(()=>t(i)),fragment:n})}else r(this,l).set(e,S(()=>t(this.anchor)));if(r(this,h).set(a,e),f){for(const[c,u]of r(this,l))c===e?a.skipped_effects.delete(u):a.skipped_effects.add(u);for(const[c,u]of r(this,o))c===e?a.skipped_effects.delete(u.effect):a.skipped_effects.add(u.effect);a.oncommit(r(this,p)),a.ondiscard(r(this,m))}else y&&(this.anchor=C),r(this,p).call(this)}}h=new WeakMap,l=new WeakMap,o=new WeakMap,b=new WeakMap,p=new WeakMap,m=new WeakMap;function se(s,e,t=!1){y&&H();var a=new X(s),f=t?L:0;function n(i,c){if(y){const _=P(s)===Y;if(i===_){var u=$();q(u),a.anchor=u,D(!1),a.ensure(i,c),D(!0);return}}a.ensure(i,c)}j(()=>{var i=!1;e((c,u=!0)=>{i=!0,n(u,c)}),i||n(!1,null)},f)}let v=!1,k=Symbol();function te(s,e,t){const a=t[e]??(t[e]={store:null,source:G(void 0),unsubscribe:F});if(a.store!==s&&!(k in t))if(a.unsubscribe(),a.store=s??null,s==null)a.source.v=void 0,a.unsubscribe=F;else{var f=!0;a.unsubscribe=J(s,n=>{f?a.source.v=n:V(a.source,n)}),f=!1}return s&&k in t?K(s):Q(a.source)}function ae(){const s={};function e(){z(()=>{for(var t in s)s[t].unsubscribe();W(s,k,{enumerable:!1,value:!0})})}return[s,e]}function re(s){var e=v;try{return v=!1,[s(),v]}finally{v=e}}export{X as B,te as a,re as c,se as i,ae as s};
